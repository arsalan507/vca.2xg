<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#22c55e">
  <title>Upload Final Edit</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../shared/styles.css">
  <style>
    :root {
      --editor-color: #22c55e;
    }
    .upload-area {
      border: 2px dashed var(--gray-300);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      text-align: center;
      background: var(--gray-50);
      cursor: pointer;
      transition: all 0.3s;
    }
    .upload-area:hover, .upload-area.dragover {
      border-color: var(--editor-color);
      background: rgba(34, 197, 94, 0.05);
    }
    .upload-area-icon {
      font-size: 48px;
      margin-bottom: var(--space-md);
    }
    .upload-area-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--gray-800);
      margin-bottom: var(--space-xs);
    }
    .upload-area-hint {
      font-size: 13px;
      color: var(--gray-500);
    }
    .upload-progress {
      margin-top: var(--space-lg);
    }
    .upload-progress-bar {
      height: 8px;
      background: var(--gray-200);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    .upload-progress-fill {
      height: 100%;
      background: var(--editor-color);
      border-radius: var(--radius-full);
      transition: width 0.3s;
    }
    .upload-progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--gray-600);
      margin-top: var(--space-sm);
    }
    .uploaded-file {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-lg);
      background: var(--white);
      border: 1px solid var(--gray-100);
      border-radius: var(--radius-md);
      margin-top: var(--space-lg);
    }
    .uploaded-file-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      background: rgba(34, 197, 94, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .uploaded-file-info {
      flex: 1;
    }
    .uploaded-file-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--gray-800);
    }
    .uploaded-file-size {
      font-size: 12px;
      color: var(--gray-500);
    }
    .uploaded-file-remove {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-full);
      background: var(--gray-100);
      border: none;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .checklist {
      background: var(--white);
      border: 1px solid var(--gray-100);
      border-radius: var(--radius-md);
      overflow: hidden;
    }
    .checklist-item {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-md) var(--space-lg);
      border-bottom: 1px solid var(--gray-100);
    }
    .checklist-item:last-child {
      border-bottom: none;
    }
    .checklist-checkbox {
      width: 24px;
      height: 24px;
      border-radius: var(--radius-sm);
      border: 2px solid var(--gray-300);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .checklist-checkbox.checked {
      background: var(--editor-color);
      border-color: var(--editor-color);
      color: white;
    }
    .checklist-label {
      flex: 1;
      font-size: 14px;
      color: var(--gray-700);
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <a href="project-detail.html" class="back-btn">‚Üê</a>
          <div>
            <div class="header-title">Upload Final Edit</div>
            <div class="header-subtitle">BCH-1032 ‚Ä¢ Cooking Hack</div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Project Info -->
      <div class="card animate-fade" style="background: var(--gray-50); border: none;">
        <div class="card-header">
          <div>
            <div class="card-title">Cooking Hack</div>
            <div class="card-subtitle">BCH-1032 ‚Ä¢ YouTube Shorts</div>
          </div>
        </div>
        <div class="card-meta">
          <span class="project-tag">üé¨ YouTube Shorts</span>
          <span class="project-tag">‚è±Ô∏è 30 sec max</span>
        </div>
      </div>

      <!-- Upload Area -->
      <div class="section animate-slide delay-1">
        <div class="section-header">
          <h2 class="section-title">Final Video</h2>
        </div>

        <div class="upload-area" id="upload-area" onclick="document.getElementById('file-input').click()">
          <div class="upload-area-icon">üé¨</div>
          <div class="upload-area-title">Tap to upload final edit</div>
          <div class="upload-area-hint">MP4, MOV ‚Ä¢ Max 500MB</div>
        </div>
        <input type="file" id="file-input" hidden accept="video/*" onchange="handleFileUpload(this.files[0])">

        <div id="uploaded-file" class="uploaded-file" style="display: none;">
          <div class="uploaded-file-icon">‚úÖ</div>
          <div class="uploaded-file-info">
            <div class="uploaded-file-name" id="file-name">cooking_hack_final.mp4</div>
            <div class="uploaded-file-size" id="file-size">45.2 MB ‚Ä¢ Uploaded</div>
          </div>
          <button class="uploaded-file-remove" onclick="removeFile()">√ó</button>
        </div>

        <div id="upload-progress" class="upload-progress" style="display: none;">
          <div class="upload-progress-bar">
            <div class="upload-progress-fill" id="progress-fill" style="width: 0%"></div>
          </div>
          <div class="upload-progress-text">
            <span id="progress-text">Uploading...</span>
            <span id="progress-percent">0%</span>
          </div>
        </div>
      </div>

      <!-- Pre-submit Checklist -->
      <div class="section animate-slide delay-2">
        <div class="section-header">
          <h2 class="section-title">Pre-submit Checklist</h2>
        </div>

        <div class="checklist">
          <div class="checklist-item" onclick="toggleCheck(this)">
            <div class="checklist-checkbox checked">‚úì</div>
            <span class="checklist-label">Video is under 60 seconds</span>
          </div>
          <div class="checklist-item" onclick="toggleCheck(this)">
            <div class="checklist-checkbox checked">‚úì</div>
            <span class="checklist-label">Audio levels are balanced</span>
          </div>
          <div class="checklist-item" onclick="toggleCheck(this)">
            <div class="checklist-checkbox">‚úì</div>
            <span class="checklist-label">Text overlays are readable</span>
          </div>
          <div class="checklist-item" onclick="toggleCheck(this)">
            <div class="checklist-checkbox">‚úì</div>
            <span class="checklist-label">CTA is clear at the end</span>
          </div>
          <div class="checklist-item" onclick="toggleCheck(this)">
            <div class="checklist-checkbox">‚úì</div>
            <span class="checklist-label">No watermarks or copyrighted content</span>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="section animate-slide delay-3">
        <div class="section-header">
          <h2 class="section-title">Edit Notes (Optional)</h2>
        </div>
        <textarea class="form-input" rows="3" placeholder="Any notes about the edit..."></textarea>
      </div>

      <!-- Submit Button -->
      <div class="mt-xl">
        <button class="btn btn-success btn-block" id="submit-btn" onclick="submitEdit()" disabled>
          Submit Final Edit
        </button>
        <p style="text-align: center; font-size: 12px; color: var(--gray-500); margin-top: var(--space-md);">
          Complete all checklist items to submit
        </p>
      </div>
    </main>
  </div>

  <script>
    let fileUploaded = false;

    function handleFileUpload(file) {
      if (!file) return;

      const uploadArea = document.getElementById('upload-area');
      const progressDiv = document.getElementById('upload-progress');
      const uploadedFile = document.getElementById('uploaded-file');
      const progressFill = document.getElementById('progress-fill');
      const progressText = document.getElementById('progress-text');
      const progressPercent = document.getElementById('progress-percent');

      uploadArea.style.display = 'none';
      progressDiv.style.display = 'block';

      // Simulate upload
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);

          setTimeout(() => {
            progressDiv.style.display = 'none';
            uploadedFile.style.display = 'flex';
            document.getElementById('file-name').textContent = file.name;
            document.getElementById('file-size').textContent = (file.size / 1024 / 1024).toFixed(1) + ' MB ‚Ä¢ Uploaded';
            fileUploaded = true;
            checkSubmitReady();
          }, 300);
        }
        progressFill.style.width = progress + '%';
        progressPercent.textContent = Math.round(progress) + '%';
        progressText.textContent = progress >= 100 ? 'Complete!' : 'Uploading...';
      }, 150);
    }

    function removeFile() {
      document.getElementById('upload-area').style.display = 'block';
      document.getElementById('uploaded-file').style.display = 'none';
      document.getElementById('file-input').value = '';
      fileUploaded = false;
      checkSubmitReady();
    }

    function toggleCheck(item) {
      const checkbox = item.querySelector('.checklist-checkbox');
      checkbox.classList.toggle('checked');
      checkSubmitReady();
    }

    function checkSubmitReady() {
      const allChecked = document.querySelectorAll('.checklist-checkbox:not(.checked)').length === 0;
      const submitBtn = document.getElementById('submit-btn');
      submitBtn.disabled = !(allChecked && fileUploaded);
    }

    function submitEdit() {
      if (confirm('Submit this edit? It will be sent for review.')) {
        window.location.href = 'success.html';
      }
    }

    // Drag and drop
    const uploadArea = document.getElementById('upload-area');
    uploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadArea.classList.add('dragover');
    });
    uploadArea.addEventListener('dragleave', () => {
      uploadArea.classList.remove('dragover');
    });
    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
      if (e.dataTransfer.files.length) {
        handleFileUpload(e.dataTransfer.files[0]);
      }
    });
  </script>
</body>
</html>
