<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#8b5cf6">
  <title>Team Members</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../shared/styles.css">
  <style>
    .member-card {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-lg);
      background: var(--white);
      border-radius: var(--radius-md);
      border: 1px solid var(--gray-100);
      margin-bottom: var(--space-md);
    }
    .member-avatar {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 600;
      color: var(--white);
    }
    .member-avatar.writer { background: linear-gradient(135deg, #3b82f6, #2563eb); }
    .member-avatar.videographer { background: linear-gradient(135deg, #f97316, #ea580c); }
    .member-avatar.editor { background: linear-gradient(135deg, #22c55e, #16a34a); }
    .member-avatar.posting { background: linear-gradient(135deg, #06b6d4, #0891b2); }
    .member-info { flex: 1; }
    .member-name { font-size: 15px; font-weight: 600; color: var(--gray-900); }
    .member-role { font-size: 13px; color: var(--gray-500); }
    .member-stats {
      display: flex;
      gap: var(--space-md);
      font-size: 12px;
      color: var(--gray-500);
      margin-top: var(--space-xs);
    }
    .member-stat { display: flex; align-items: center; gap: 4px; }

    /* Toggle Switch */
    .toggle-container {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
    }
    .toggle-label {
      font-size: 10px;
      color: var(--gray-500);
      text-transform: uppercase;
    }
    .toggle-switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: var(--gray-300);
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-switch.active {
      background: var(--success);
    }
    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: var(--white);
      border-radius: var(--radius-full);
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    .toggle-switch.active::after {
      transform: translateX(20px);
    }
    .auto-approved-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: var(--radius-full);
      background: rgba(34, 197, 94, 0.1);
      color: var(--success);
      margin-left: var(--space-sm);
    }
    /* Add User Button */
    .add-user-btn {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
      border: none;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
      cursor: pointer;
      z-index: 100;
    }
    /* Member Actions */
    .member-actions {
      display: flex;
      gap: var(--space-sm);
      margin-left: var(--space-sm);
    }
    .member-action-btn {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-full);
      border: 1px solid var(--gray-200);
      background: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .member-action-btn:hover {
      background: var(--gray-50);
    }
    .member-action-btn.delete:hover {
      background: rgba(239, 68, 68, 0.1);
      border-color: var(--danger);
    }
    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: var(--space-lg);
    }
    .modal-overlay.show { display: flex; }
    .modal {
      background: var(--white);
      border-radius: var(--radius-lg);
      width: 100%;
      max-width: 400px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal-header {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--gray-100);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--gray-900);
    }
    .modal-close {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-full);
      border: none;
      background: var(--gray-100);
      font-size: 18px;
      cursor: pointer;
    }
    .modal-body { padding: var(--space-lg); }
    .modal-footer {
      padding: var(--space-lg);
      border-top: 1px solid var(--gray-100);
      display: flex;
      gap: var(--space-sm);
    }
    .form-group { margin-bottom: var(--space-lg); }
    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: var(--space-sm);
    }
    .form-input {
      width: 100%;
      padding: var(--space-md);
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-md);
      font-size: 14px;
    }
    .form-input:focus {
      outline: none;
      border-color: var(--admin-color);
    }
    .role-select {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-sm);
    }
    .role-option {
      padding: var(--space-md);
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .role-option:hover { border-color: var(--admin-color); }
    .role-option.selected {
      border-color: var(--admin-color);
      background: rgba(139, 92, 246, 0.1);
    }
    .role-option-icon { font-size: 24px; margin-bottom: 4px; }
    .role-option-label { font-size: 12px; font-weight: 500; }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <a href="index.html" class="back-btn">â†</a>
          <div>
            <div class="header-title">Team Members</div>
            <div class="header-subtitle">15 active members</div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Filter Tabs -->
      <div class="filter-tabs animate-fade">
        <button class="filter-tab active">All <span class="count">15</span></button>
        <button class="filter-tab">Writers <span class="count">5</span></button>
        <button class="filter-tab">Videographers <span class="count">4</span></button>
        <button class="filter-tab">Editors <span class="count">3</span></button>
        <button class="filter-tab">Posting <span class="count">3</span></button>
      </div>

      <!-- Script Writers -->
      <div class="section animate-slide delay-1">
        <div class="section-header">
          <h2 class="section-title">âœï¸ Script Writers</h2>
        </div>

        <div class="member-card">
          <div class="member-avatar writer">RS</div>
          <div class="member-info">
            <div class="member-name">Rahul Sharma <span class="auto-approved-badge">âœ“ Auto</span></div>
            <div class="member-role">Trusted Writer</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ“ 45 scripts</span>
              <span class="member-stat">âœ… 92%</span>
            </div>
          </div>
          <div class="toggle-container">
            <span class="toggle-label">Auto Approve</span>
            <div class="toggle-switch active" onclick="toggleAutoApprove(this)"></div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="member-card">
          <div class="member-avatar writer">PP</div>
          <div class="member-info">
            <div class="member-name">Priya Patel</div>
            <div class="member-role">Script Writer</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ“ 28 scripts</span>
              <span class="member-stat">âœ… 78%</span>
            </div>
          </div>
          <div class="toggle-container">
            <span class="toggle-label">Auto Approve</span>
            <div class="toggle-switch" onclick="toggleAutoApprove(this)"></div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="member-card">
          <div class="member-avatar writer">AK</div>
          <div class="member-info">
            <div class="member-name">Amit Kumar</div>
            <div class="member-role">Script Writer</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ“ 19 scripts</span>
              <span class="member-stat">âœ… 65%</span>
            </div>
          </div>
          <div class="toggle-container">
            <span class="toggle-label">Auto Approve</span>
            <div class="toggle-switch" onclick="toggleAutoApprove(this)"></div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>

      <!-- Videographers -->
      <div class="section animate-slide delay-2">
        <div class="section-header">
          <h2 class="section-title">ğŸ¥ Videographers</h2>
        </div>

        <div class="member-card">
          <div class="member-avatar videographer">AK</div>
          <div class="member-info">
            <div class="member-name">Arun Kumar <span class="auto-approved-badge">âœ“ Auto</span></div>
            <div class="member-role">Trusted Videographer</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ¬ 32 shoots</span>
              <span class="member-stat">ğŸ“¹ 3 active</span>
            </div>
          </div>
          <div class="toggle-container">
            <span class="toggle-label">Auto Approve</span>
            <div class="toggle-switch active" onclick="toggleAutoApprove(this)"></div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="member-card">
          <div class="member-avatar videographer">DS</div>
          <div class="member-info">
            <div class="member-name">Deepak Singh</div>
            <div class="member-role">Videographer</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ¬ 28 shoots</span>
              <span class="member-stat">ğŸ“¹ 2 active</span>
            </div>
          </div>
          <div class="toggle-container">
            <span class="toggle-label">Auto Approve</span>
            <div class="toggle-switch" onclick="toggleAutoApprove(this)"></div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>

      <!-- Editors -->
      <div class="section animate-slide delay-3">
        <div class="section-header">
          <h2 class="section-title">âœ‚ï¸ Editors</h2>
        </div>

        <div class="member-card">
          <div class="member-avatar editor">VR</div>
          <div class="member-info">
            <div class="member-name">Vikram Rao</div>
            <div class="member-role">Editor</div>
            <div class="member-stats">
              <span class="member-stat">âœ‚ï¸ 48 edits</span>
              <span class="member-stat">ğŸ¬ 2 active</span>
            </div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="member-card">
          <div class="member-avatar editor">SR</div>
          <div class="member-info">
            <div class="member-name">Sneha Reddy</div>
            <div class="member-role">Editor</div>
            <div class="member-stats">
              <span class="member-stat">âœ‚ï¸ 35 edits</span>
              <span class="member-stat">ğŸ¬ 1 active</span>
            </div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>

      <!-- Posting Managers -->
      <div class="section animate-slide delay-4">
        <div class="section-header">
          <h2 class="section-title">ğŸ“± Posting Managers</h2>
        </div>

        <div class="member-card">
          <div class="member-avatar posting">NK</div>
          <div class="member-info">
            <div class="member-name">Neha Kapoor</div>
            <div class="member-role">Posting Manager</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ“¤ 89 posts</span>
              <span class="member-stat">ğŸ“… 5 scheduled</span>
            </div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="member-card">
          <div class="member-avatar posting">RG</div>
          <div class="member-info">
            <div class="member-name">Raj Gupta</div>
            <div class="member-role">Posting Manager</div>
            <div class="member-stats">
              <span class="member-stat">ğŸ“¤ 67 posts</span>
              <span class="member-stat">ğŸ“… 3 scheduled</span>
            </div>
          </div>
          <div class="member-actions">
            <button class="member-action-btn" onclick="editMember(this)" title="Edit">âœï¸</button>
            <button class="member-action-btn delete" onclick="deleteMember(this)" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Add User FAB -->
    <button class="add-user-btn" onclick="openAddUserModal()">+</button>

    <!-- Add/Edit User Modal -->
    <div class="modal-overlay" id="user-modal">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title" id="modal-title">Add Team Member</h3>
          <button class="modal-close" onclick="closeModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-input" id="user-name" placeholder="Enter full name">
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="user-email" placeholder="Enter email address">
          </div>
          <div class="form-group">
            <label class="form-label">Select Role</label>
            <div class="role-select">
              <div class="role-option" onclick="selectRole(this, 'writer')">
                <div class="role-option-icon">âœï¸</div>
                <div class="role-option-label">Script Writer</div>
              </div>
              <div class="role-option" onclick="selectRole(this, 'videographer')">
                <div class="role-option-icon">ğŸ¥</div>
                <div class="role-option-label">Videographer</div>
              </div>
              <div class="role-option" onclick="selectRole(this, 'editor')">
                <div class="role-option-icon">âœ‚ï¸</div>
                <div class="role-option-label">Editor</div>
              </div>
              <div class="role-option" onclick="selectRole(this, 'posting')">
                <div class="role-option-icon">ğŸ“±</div>
                <div class="role-option-label">Posting Manager</div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" style="flex: 1;" onclick="closeModal()">Cancel</button>
          <button class="btn btn-primary" style="flex: 1;" onclick="saveUser()">Save Member</button>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Home</span>
      </a>
      <a href="pending.html" class="nav-item">
        <span class="nav-icon">ğŸ“</span>
        <span class="nav-label">Pending</span>
      </a>
      <a href="team.html" class="nav-item active">
        <span class="nav-icon">ğŸ‘¥</span>
        <span class="nav-label">Team</span>
      </a>
    </nav>
  </div>

  <script>
    function toggleAutoApprove(toggle) {
      const isActive = toggle.classList.toggle('active');
      const card = toggle.closest('.member-card');
      const nameEl = card.querySelector('.member-name');
      const roleEl = card.querySelector('.member-role');

      // Update badge
      const existingBadge = nameEl.querySelector('.auto-approved-badge');
      if (isActive) {
        if (!existingBadge) {
          const badge = document.createElement('span');
          badge.className = 'auto-approved-badge';
          badge.textContent = 'âœ“ Auto';
          nameEl.appendChild(badge);
        }
        // Update role text
        if (roleEl.textContent.includes('Writer') && !roleEl.textContent.includes('Trusted')) {
          roleEl.textContent = 'Trusted Writer';
        } else if (roleEl.textContent.includes('Videographer') && !roleEl.textContent.includes('Trusted')) {
          roleEl.textContent = 'Trusted Videographer';
        }
        showToast('Auto-approval enabled! Scripts will be approved automatically.');
      } else {
        if (existingBadge) {
          existingBadge.remove();
        }
        // Revert role text
        if (roleEl.textContent.includes('Trusted Writer')) {
          roleEl.textContent = 'Script Writer';
        } else if (roleEl.textContent.includes('Trusted Videographer')) {
          roleEl.textContent = 'Videographer';
        }
        showToast('Auto-approval disabled. Scripts will need manual review.');
      }
    }

    function showToast(message) {
      // Remove existing toast
      const existingToast = document.querySelector('.toast');
      if (existingToast) existingToast.remove();

      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      toast.style.cssText = `
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--gray-800);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 1000;
        animation: fadeIn 0.3s ease-out;
        max-width: 90%;
        text-align: center;
      `;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s';
        setTimeout(() => toast.remove(), 300);
      }, 2500);
    }

    // Filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // Modal functions
    let selectedRole = null;
    let editingCard = null;

    function openAddUserModal() {
      document.getElementById('modal-title').textContent = 'Add Team Member';
      document.getElementById('user-name').value = '';
      document.getElementById('user-email').value = '';
      selectedRole = null;
      editingCard = null;
      document.querySelectorAll('.role-option').forEach(r => r.classList.remove('selected'));
      document.getElementById('user-modal').classList.add('show');
    }

    function closeModal() {
      document.getElementById('user-modal').classList.remove('show');
    }

    function selectRole(element, role) {
      document.querySelectorAll('.role-option').forEach(r => r.classList.remove('selected'));
      element.classList.add('selected');
      selectedRole = role;
    }

    function saveUser() {
      const name = document.getElementById('user-name').value.trim();
      const email = document.getElementById('user-email').value.trim();

      if (!name) {
        alert('Please enter a name');
        return;
      }
      if (!selectedRole) {
        alert('Please select a role');
        return;
      }

      closeModal();

      if (editingCard) {
        // Update existing member
        const nameEl = editingCard.querySelector('.member-name');
        const roleEl = editingCard.querySelector('.member-role');
        nameEl.childNodes[0].textContent = name + ' ';
        roleEl.textContent = getRoleLabel(selectedRole);
        showToast('Team member updated successfully!');
      } else {
        // Add new member
        showToast(`${name} added as ${getRoleLabel(selectedRole)}!`);
      }
    }

    function getRoleLabel(role) {
      const labels = {
        'writer': 'Script Writer',
        'videographer': 'Videographer',
        'editor': 'Editor',
        'posting': 'Posting Manager'
      };
      return labels[role] || role;
    }

    function editMember(btn) {
      const card = btn.closest('.member-card');
      const name = card.querySelector('.member-name').childNodes[0].textContent.trim();
      const role = card.querySelector('.member-role').textContent;

      editingCard = card;
      document.getElementById('modal-title').textContent = 'Edit Team Member';
      document.getElementById('user-name').value = name;
      document.getElementById('user-email').value = name.toLowerCase().replace(' ', '.') + '@example.com';

      // Select the current role
      document.querySelectorAll('.role-option').forEach(r => r.classList.remove('selected'));
      if (role.includes('Writer')) {
        document.querySelector('.role-option:nth-child(1)').classList.add('selected');
        selectedRole = 'writer';
      } else if (role.includes('Videographer')) {
        document.querySelector('.role-option:nth-child(2)').classList.add('selected');
        selectedRole = 'videographer';
      } else if (role.includes('Editor')) {
        document.querySelector('.role-option:nth-child(3)').classList.add('selected');
        selectedRole = 'editor';
      } else if (role.includes('Posting')) {
        document.querySelector('.role-option:nth-child(4)').classList.add('selected');
        selectedRole = 'posting';
      }

      document.getElementById('user-modal').classList.add('show');
    }

    function deleteMember(btn) {
      const card = btn.closest('.member-card');
      const name = card.querySelector('.member-name').childNodes[0].textContent.trim();

      if (confirm(`Are you sure you want to remove ${name} from the team?`)) {
        card.style.transition = 'all 0.3s';
        card.style.opacity = '0';
        card.style.transform = 'translateX(100%)';
        setTimeout(() => {
          card.remove();
          showToast(`${name} removed from team`);
          updateMemberCount();
        }, 300);
      }
    }

    function updateMemberCount() {
      const count = document.querySelectorAll('.member-card').length;
      document.querySelector('.header-subtitle').textContent = count + ' active members';
    }
  </script>
</body>
</html>
